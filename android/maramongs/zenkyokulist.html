<!DOCTYPE HTML>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MaraSongs「全曲リスト更新」</title>
    <link rel="stylesheet" href="css/reset.css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-2.2.3.js"></script>
    <script src="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.js"></script>
    <link href="../../main.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div align="right">
        <a href="en/zenkyokulist.html">English</a>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12 col-md-8">
                <table align="left" valign="top" border="0" style="font-size: 11pt; line-height: 150%;">
                    <tr valign="top">
                        <td style="width: 58px; height: 22px">
                            <a href="index.html">
                                <img src="img/ic_launcher-web.png" alt="Marasong" style="width: 48px; " vspace="1" hspace="1">
                            </a>
                        </td>
                        <td style="margin: 10px; padding: 10px;">
                            当たり前に使える音楽プレイヤー
                            <h2>MaraSongs</h2>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-sm-12 col-md-4" style="text-align: right;">
                <P class="container">
                    <div class="row">
                        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3146425308522831" data-ad-slot="4219928305" data-ad-format="auto"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                    <div class="row">
                        <script type="text/javascript">
                            var nend_params = {
                                "media": 32269,
                                "site": 206990,
                                "spot": 583222,
                                "type": 1,
                                "oriented": 1
                            };
                        </script>
                        <script type="text/javascript" src="https://js1.nend.net/js/nendAdLoader.js"></script>
                    </div>
                </P>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <ul class="nav nav-tabs" style="width: 800dp; margin: 0px 0px 0px 15px;">
                    <li class="nav-item" style="margin-right: 18px;">
                        <a class="nav-link bg-primary active" href="index.html">概要</a>
                    </li>
                    <li class="nav-item" style="margin-right: 18px;">
                        <a class="nav-link bg-primary" href="player.html">プレイヤー</a>
                    </li>
                    <li class="nav-item" style="margin-right: 18px;">
                        <a class="nav-link bg-primary" href="list.html">リスト</a>
                    </li>
                    <li class="nav-item" style="margin-right: 18px;">
                        <a class="nav-link bg-primary" href="pref.html">設定画面</a>
                    </li>
                    <li class="nav-item" style="margin-right: 18px;">
                        <a class="nav-link bg-primary" style="background: #5cb85c !important;">特徴機能詳細</a>
                    </li>
                </ul>
            </div>
        </div>

        <div style="line-height:16px ; text-alingn:left;
				 border-style: solid ; border-width: 1px; padding: 10px 5px 10px 20px; border-color: #999999 ;
				 border-radius: 10px; box-shadow: 10px 10px 10px #AAA;">
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12">
                    <ul class="nav nav-tabs" style="margin: -10px 0px 0px -20px;">
                        <li class="nav-item" style="margin-right: 18px;">
                            <a class="nav-link bg-primary" style="background: #5cb85c !important;">全曲リスト</a>
                        </li>
                        <li class="nav-item" style="margin-right: 18px;">
                            <a class="nav-link bg-primary" href="listup.html">リストアップ編集</a>
                        </li>
                        <li class="nav-item" style="margin-right: 18px;">
                            <a class="nav-link bg-primary" href="request.html">リクエストリスト</a>
                        </li>
                        <li class="nav-item" style="margin-right: 18px;">
                            <!-- <nobr> -->
                            <a class="nav-link bg-primary" href="notif.html">ノティフィケーション/ロックスクリーンプレイヤー</a>
                            <!-- </nobr> -->
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <h2>全曲リスト</h2>
                    MaraSongsは同一アーティストのアルバム毎に止める事無く全曲再生を行う為に全曲リスト（独自のプレイリスト）を作成します。
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeeeff;">
                                <h4>通常のミュージックプレイヤーは</h4>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeeeff;"></td>
                            <td>
                                音楽ファイルは通常、クレジットされているアーティスト名のフォルダの下に/アルバム名のフォルダ、 その下に各楽曲ファイルが並べられ、ミュージックプレイヤーもその並びに従って全曲再生を行います。<br>
                                <img src="img/hikaku_a_lisut.png" alt="比較" width="70%" style="margin-left: 20px;">
                            </td>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-8 div-img">
                    <img src="img/dir.gif" alt="プレイヤー設定" width="90%">
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeeeff;"></td>
                            <td>
                                例えばゲスト参加などでアーティストフォルダが分けられると、その下に配置されたアルバム名フォルダも分割され、通常のミュージックプレイヤーでは一枚のアルバムとして連続再生されません。
                                <br><br>また連続再生も分断されたアルバム単位で停止するプレイヤーが殆どです。
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeeeff;"></td>
                            <td>
                                リッピングに使うミュージックプレイヤーやファイルに書き込まれるタグ情報には表示される名用とは別に"アルバムアーティスト"などの名称でアルバムを分断させない名称で、管理されています。
                            </td>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-8 div-img">
                    <img src="img/WMP.gif" alt="プレイヤー設定" width="90%">
                </div>
            </div>


            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeeeff;"></td>
                            <td>
                                <img src="img/list_artist.png" alt="比較" width="70%" style="margin-left: 20px;">
                            </td>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-8 div-img">
                    しかしAndroidで音楽ファイルを管理するデータテーブル(MediaStore)にはその概念が無いので上記のような状態になります。<br><br> そこでMaraSongsではアルバムアーティスト(リストアップ用のアーティスト名)を設定した独自のデータベースを作成して妥当な並び順での全曲連続再生を実現します。
                    <br><br>またデータベースをプレイリストとして使う事で任意のリストアップ順を設定する事もできます。</td>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td colspan=2 style="background:#ffeeff;">
                                <h4>全曲リストが作られるタイミング</h4>
                            </td>
                        </tr>
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#ffeeff;"></td>
                            <td>
                                MaraSongsが全曲リストを作るタイミングは3つ
                                <ol>
                                    <li>
                                        インストール直後<br> 全曲リストが無いのでまず作成して頂ける様、お願いします。
                                        <br> *既に他のミュージックプレイヤーで作成したプレイリストが有ればそれを再生して頂いても構いませんが読み込み時間が発生するので、お早めに全曲リストを作成する事をお奨めします。
                                    </li>
                                    <li>
                                        端末に登録されたファイルが変化した時<br> MaraSongsは起動時に全曲リストに登録してあるファイルの総数と最も新しいファイルの更新日付を確認し、変化が有れば更新を求めます。
                                        <br>実際には無いファイルの処理でエラーが発生しない様、新しく楽曲を追加した時は全曲リストも更新して下さい。
                                    </li>
                                    <li>
                                        リストアップ調整後<br>
                                        <small>調整反映の為に実施します。</small>
                                    </li>
                                </ol>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-9 col-md-9">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#ffeeff;"></td>
                            <td>
                                <ol>
                                    <li value="4">
                                        リスト画面のツールバーメニュ-から機能/全曲リスト更新を選択した時<br>
                                        <small>動作がおかしい時はこまめに作り直して下さい。</small>
                                    </li>
                                </ol>
                                ご注意<br>*PCにUSB接続している時など、ユーザーが任意にメモリーを使っている時はアプリケーションからメモリーを認識できなくなります。<br> "全曲リスト"更新をご利用の際はUSBケーブルを外して下さい。
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3 div-img">
                    <img src="img/inst01.png" alt="開始" width="90%">
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td colspan=2 style="background:#eeffee;">
                                <h4>処理の概要</h4>
                            </td>
                        </tr>
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeffee;"></td>
                            <td>
                                時間が掛かる処理なので、誤操作で起動した時は中断できる様、確認ダイアログ位を表示します。
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-9 col-md-9">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeffee;"></td>
                            <td>
                                <ul>
                                    <li>
                                        処理時間の目安は6,000曲で約2分です,
                                    </li>
                                    <li>
                                        「しない」を選択すると他のプレイリストを選択出来る状態にします。
                                    </li>
                                </ul> ご注意
                                <ul>
                                    <li>
                                        処理が終了してリスト表示の書き換えが完全に終わると終了ダイアログを表示します。画面の書き換え中に画面にタッチするとエラーが発生する事が有りますので、このダイアログの表示が出るまでお待ちください。
                                    </li>
                                </ul>
                                <ol>
                                    <li>
                                        元データの確認
                                        <ul>
                                            <li>
                                                Androidが認識している音楽ファイルの情報を確認し、欠落した部分を補正します。
                                            </li>
                                            <li>
                                                Androidの音楽ファイルはMediaStoreというデータテーブルで管理されていますが、このテーブルに欠けがあると正常なリストアップができません。
                                            </li>
                                            <li>
                                                MaraSongsは初回起動時と端末に格納された曲に(曲数や最新更新日)に変化が有ればMediaStoreのデータ欠落をチェックし、補完します。
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        リストアップ用キーフィールド(アルバムアーティスト)の作成<br> 全曲抽出の大元になるアーティスト名をコピーして妥当な並べ替えが可能な様に加工します。具体的には
                                        <ol>
                                            <li>&quot;The &quot;を抜いてThe BeatlesならBの列に並ぶ様にします。 </li>
                                            <li>すべて大文字にしてthe brilliant greenやblurもBの列に並べます。</li>
                                            <li>ゲスト参加曲、例えば「絢香 × コブクロ」　なら「× コブクロ」を取って「絢香」<br> Santana Feat Eric Clapton なら&quot;Feat &quot;以降をカットしてアルバムのリーダー名だけにします。
                                            </li>
                                        </ol>
                                        これでゲスト参加などで一枚のアルバムがバラバラになる事を防ぎます。
                                    </li>
                                </ol>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3 div-img">
                    <img src="img/inst02.png" alt="プログレス" width="90%">
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-9 col-md-9">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeffee;"></td>
                            <td>
                                <ol>
                                    <li value="3">コンピレーションの処理 一枚のアルバムの中で
                                        <ol>
                                            <li>
                                                同じ名称のアーティストの比率（そのアーティストの曲数 / アルバム内の曲数 ）が設定の「プレイヤー設定 / コンピレーション設定」で指定した比率を<br> 超えれば最多のアーティスト名に（そのアーティストのアルバム）、越えなければコンピレーションに設定します。
                                                <br>アルバムアーティスト名もコンピレーションにします。
                                            </li>
                                            <li>
                                                アルバム名毎に抽出した時にトラック番号１が複数ある場合はまとめ処理を中止して、そのままのアーティスト名でリストアップします。
                                            </li>
                                            <li>
                                                トラック番号が入っていないファイルもありますので、二番目に多いアーティストの曲が3曲(仮設定)を超えたら別のアルバムとしてまとめ処理を中止します。
                                            </li>
                                        </ol>
                                        *まとめ過ぎると予想外なアーティスト名でリストアップされる事もありますので、自動でのまとめはそこそこにします。
                                    </li>
                                    <li>リストアップ編集の反映
                                        <br>上記までの修正で一枚にできなかったアルバムや、ユーザーが任意に設定するアーティストとの関連付けはリストアイテムをロングタップした時に表示される<a href="list.html#add_listup">リストアップ編集</a>で修正できます。<br> この修正結果はデータベース保存されていますので、全曲リストを更新した後にユーザーの意向による修正を反映させます。
                                    </li>
                                </ol>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3 div-img">
                    <img src="img/inst92.png" alt="全部つなげると" width="90%">
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-9 col-md-9">
                    <table align="left" valign="top">
                        <tr style="margin: 10px; padding: 10px;">
                            <td style="background:#eeffee;"></td>
                            <td>
                                <ol>
                                    <li value="5">仕上げ
                                        <ul>
                                            <li>上記までのリストをアルファベット順のアーティスト、年代順のアルバム、トラック番号順のタイトルという階層になる様、並べて全曲リストを構成します。</li>
                                            <li>アルバムアートの引き当てやアーティストもしくはアルバムごとの集計を行ったアーティストリストを作成します。</li>
                                        </ul>
                                </ol>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3 div-img">
                    <img src="img/inst_end.png" alt="終了" width="90%">
                </div>
            </div>
        </div>

        <footer class="footer">
            <p style="text-align: right; background-color:white">
                <div class="col-xs-12 col-sm-12">
                    <div class="col-xs-6 col-sm-8">
                        <a href="../index.htm">
                            <img src="../img/koubou.png" alt="比治山工房" width="100%">
                        </a>
                    </div>
                    <div class="col-xs-2 col-sm-2">
                        <a href="https://play.google.com/store/apps/details?id=com.hijiyam_koubou.marasongs ">
                            <img src="../img/marasongs.png " alt="Marasong_qr " vspace="1 " hspace="1 "></a>
                    </div>
                    <div class="col-xs-4 col-sm-2">
                        Copyright 2016
                    </div>
                </div>
            </p>
        </footer>
    </div>
</body>

</html>